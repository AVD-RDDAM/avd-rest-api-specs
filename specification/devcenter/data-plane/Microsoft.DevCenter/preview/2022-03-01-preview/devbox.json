{
  "swagger": "2.0",
  "info": {
    "version": "2022-03-01-preview",
    "title": "DevCenter"
  },
  "x-ms-parameterized-host": {
    "hostTemplate": "{devCenter}.{devcenterDnsSuffix}",
    "parameters": [
      {
        "name": "devCenter",
        "description": "The DevCenter to operate on.",
        "required": true,
        "type": "string",
        "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{2,62}$",
        "minLength": 3,
        "maxLength": 63,
        "in": "path",
        "x-ms-skip-url-encoding": true
      },
      {
        "name": "devCenterDnsSuffix",
        "in": "path",
        "required": true,
        "type": "string",
        "default": "devcenter.azure.com",
        "x-ms-skip-url-encoding": true,
        "description": "The DNS suffix used as the base for all devcenter requests."
      }
    ]
  },
  "schemes": [
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "security": [
    {
      "azure_auth": [
        "user_impersonation"
      ]
    }
  ],
  "securityDefinitions": {
    "azure_auth": {
      "type": "oauth2",
      "authorizationUrl": "https://login.microsoftonline.com/common/oauth2/authorize",
      "flow": "implicit",
      "description": "Azure Active Directory OAuth2 Flow",
      "scopes": {
        "user_impersonation": "impersonate your user account"
      }
    }
  },
  "paths": {
    "/projects/{projectName}/pools": {
      "get": {
        "tags": [
          "Pools"
        ],
        "parameters": [
          {
            "$ref": "devcenter.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "devcenter.json#/parameters/TopParameter"
          },
          {
            "$ref": "devcenter.json#/parameters/FilterParameter"
          },
          {
            "$ref": "devcenter.json#/parameters/ProjectNameParameter"
          }
        ],
        "description": "Lists available pools",
        "operationId": "Pool_List",
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/PoolListResult"
            }
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "devcenter.json#/definitions/CloudError"
            },
            "headers": {
              "x-ms-error-code": {
                "description": "The error code for specific error that occurred.",
                "type": "string"
              }
            }
          }
        },
        "x-ms-examples": {
          "listPools": {
            "$ref": "./examples/Pools_List.json"
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "nextLink"
        },
        "x-ms-odata": "#/definitions/Pool"
      }
    },
    "/projects/{projectName}/pools/{poolName}": {
      "get": {
        "tags": [
          "Pools"
        ],
        "parameters": [
          {
            "$ref": "devcenter.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "#/parameters/PoolNameParameter"
          },
          {
            "$ref": "devcenter.json#/parameters/ProjectNameParameter"
          }
        ],
        "description": "Gets a pool",
        "operationId": "Pool_Get",
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/Pool"
            }
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "devcenter.json#/definitions/CloudError"
            },
            "headers": {
              "x-ms-error-code": {
                "description": "The error code for specific error that occurred.",
                "type": "string"
              }
            }
          }
        },
        "x-ms-examples": {
          "Pools_Get": {
            "$ref": "./examples/Pools_Get.json"
          }
        }
      }
    },
    "/devboxes": {
      "get": {
        "tags": [
          "Dev Boxes"
        ],
        "parameters": [
          {
            "$ref": "devcenter.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "devcenter.json#/parameters/FilterParameter"
          },
          {
            "$ref": "devcenter.json#/parameters/TopParameter"
          }
        ],
        "description": "Lists Dev Boxes that the caller has access to in the DevCenter.",
        "operationId": "DevBox_List",
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/DevBoxListResult"
            }
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "devcenter.json#/definitions/CloudError"
            },
            "headers": {
              "x-ms-error-code": {
                "description": "The error code for specific error that occurred.",
                "type": "string"
              }
            }
          }
        },
        "x-ms-examples": {
          "DevBox_List": {
            "$ref": "./examples/DevBox_List.json"
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "nextLink"
        },
        "x-ms-odata": "#/definitions/DevBox"
      }
    },
    "/users/{userId}/devboxes": {
      "get": {
        "tags": [
          "Dev Boxes"
        ],
        "parameters": [
          {
            "$ref": "devcenter.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "devcenter.json#/parameters/FilterParameter"
          },
          {
            "$ref": "devcenter.json#/parameters/TopParameter"
          },
          {
            "$ref": "#/parameters/UserIdParameterName"
          }
        ],
        "description": "Lists Dev Boxes in the Dev Center for a particular user.",
        "operationId": "DevBox_ListByUser",
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/DevBoxListResult"
            }
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "devcenter.json#/definitions/CloudError"
            },
            "headers": {
              "x-ms-error-code": {
                "description": "The error code for specific error that occurred.",
                "type": "string"
              }
            }
          }
        },
        "x-ms-examples": {
          "DevBox_ListByUserByProject": {
            "$ref": "./examples/DevBox_ListByUserByProject.json"
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "nextLink"
        },
        "x-ms-odata": "#/definitions/DevBox"
      }
    },
    "/projects/{projectName}/users/{userId}/devboxes": {
      "get": {
        "tags": [
          "Dev Boxes"
        ],
        "parameters": [
          {
            "$ref": "devcenter.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "devcenter.json#/parameters/FilterParameter"
          },
          {
            "$ref": "devcenter.json#/parameters/TopParameter"
          },
          {
            "$ref": "devcenter.json#/parameters/ProjectNameParameter"
          },
          {
            "$ref": "#/parameters/UserIdParameterName"
          }
        ],
        "description": "Lists Dev Boxes in the project for a particular user.",
        "operationId": "DevBox_ListByProject",
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/DevBoxListResult"
            }
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "devcenter.json#/definitions/CloudError"
            },
            "headers": {
              "x-ms-error-code": {
                "description": "The error code for specific error that occurred.",
                "type": "string"
              }
            }
          }
        },
        "x-ms-examples": {
          "DevBox_ListByUserByProject": {
            "$ref": "./examples/DevBox_ListByUserByProject.json"
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "nextLink"
        },
        "x-ms-odata": "#/definitions/DevBox"
      }
    },
    "/projects/{projectName}/users/{userId}/devboxes/{devBoxName}": {
      "get": {
        "tags": [
          "Dev Boxes"
        ],
        "parameters": [
          {
            "$ref": "devcenter.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "devcenter.json#/parameters/ProjectNameParameter"
          },
          {
            "$ref": "#/parameters/UserIdParameterName"
          },
          {
            "$ref": "#/parameters/DevBoxNameParameterName"
          }
        ],
        "description": "Gets a Dev Box",
        "operationId": "DevBox_Get",
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/DevBox"
            }
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "devcenter.json#/definitions/CloudError"
            },
            "headers": {
              "x-ms-error-code": {
                "description": "The error code for specific error that occurred.",
                "type": "string"
              }
            }
          }
        },
        "x-ms-examples": {
          "getDevBoxForUser": {
            "$ref": "./examples/DevBox_Get.json"
          }
        }
      },
      "put": {
        "tags": [
          "Dev Boxes"
        ],
        "parameters": [
          {
            "$ref": "devcenter.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "devcenter.json#/parameters/ProjectNameParameter"
          },
          {
            "$ref": "#/parameters/UserIdParameterName"
          },
          {
            "$ref": "#/parameters/DevBoxNameParameterName"
          },
          {
            "name": "body",
            "in": "body",
            "description": "Represents a environment.",
            "required": true,
            "schema": {
              "$ref": "#/definitions/DevBox"
            }
          }
        ],
        "description": "Creates or updates a Dev Box.",
        "operationId": "DevBox_Create",
        "x-ms-long-running-operation": true,
        "x-ms-long-running-operation-options": {
          "final-state-via": "original-uri"
        },
        "responses": {
          "201": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/DevBox"
            }
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "devcenter.json#/definitions/CloudError"
            },
            "headers": {
              "x-ms-error-code": {
                "description": "The error code for specific error that occurred.",
                "type": "string"
              }
            }
          }
        },
        "x-ms-examples": {
          "createDevBox": {
            "$ref": "./examples/DevBox_Create.json"
          }
        }
      },
      "delete": {
        "tags": [
          "Dev Boxes"
        ],
        "parameters": [
          {
            "$ref": "devcenter.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "devcenter.json#/parameters/ProjectNameParameter"
          },
          {
            "$ref": "#/parameters/UserIdParameterName"
          },
          {
            "$ref": "#/parameters/DevBoxNameParameterName"
          }
        ],
        "description": "Deletes a Dev Box.",
        "operationId": "DevBox_Delete",
        "x-ms-long-running-operation": true,
        "responses": {
          "202": {
            "description": "OK"
          },
          "204": {
            "description": "Resource does not exist."
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "devcenter.json#/definitions/CloudError"
            },
            "headers": {
              "x-ms-error-code": {
                "description": "The error code for specific error that occurred.",
                "type": "string"
              }
            }
          }
        },
        "x-ms-examples": {
          "deleteDevBox": {
            "$ref": "./examples/DevBox_Delete.json"
          }
        }
      }
    },
    "/projects/{projectName}/users/{userId}/devboxes/{devBoxName}:start": {
      "post": {
        "tags": [
          "Dev Boxes"
        ],
        "parameters": [
          {
            "$ref": "devcenter.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "devcenter.json#/parameters/ProjectNameParameter"
          },
          {
            "$ref": "#/parameters/UserIdParameterName"
          },
          {
            "$ref": "#/parameters/DevBoxNameParameterName"
          }
        ],
        "description": "Starts a Dev Box",
        "operationId": "DevBox_Start",
        "x-ms-long-running-operation": true,
        "responses": {
          "202": {
            "description": "The request was accepted"
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "devcenter.json#/definitions/CloudError"
            },
            "headers": {
              "x-ms-error-code": {
                "description": "The error code for specific error that occurred.",
                "type": "string"
              }
            }
          }
        },
        "x-ms-examples": {
          "startDevBoxForUser": {
            "$ref": "./examples/DevBox_Start.json"
          }
        }
      }
    },
    "/projects/{projectName}/users/{userId}/devboxes/{devBoxName}:stop": {
      "post": {
        "tags": [
          "Dev Boxes"
        ],
        "parameters": [
          {
            "$ref": "devcenter.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "devcenter.json#/parameters/ProjectNameParameter"
          },
          {
            "$ref": "#/parameters/UserIdParameterName"
          },
          {
            "$ref": "#/parameters/DevBoxNameParameterName"
          }
        ],
        "description": "Stops a Dev Box",
        "operationId": "DevBox_Stop",
        "x-ms-long-running-operation": true,
        "responses": {
          "202": {
            "description": "The request was accepted"
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "devcenter.json#/definitions/CloudError"
            },
            "headers": {
              "x-ms-error-code": {
                "description": "The error code for specific error that occurred.",
                "type": "string"
              }
            }
          }
        },
        "x-ms-examples": {
          "stopDevBoxForUser": {
            "$ref": "./examples/DevBox_Stop.json"
          }
        }
      }
    },
    "/projects/{projectName}/users/{userId}/devboxes/{devBoxName}:getRemoteConnection": {
      "get": {
        "tags": [
          "Dev Boxes"
        ],
        "parameters": [
          {
            "$ref": "devcenter.json#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "devcenter.json#/parameters/ProjectNameParameter"
          },
          {
            "$ref": "#/parameters/UserIdParameterName"
          },
          {
            "$ref": "#/parameters/DevBoxNameParameterName"
          }
        ],
        "description": "Gets RDP Connection info",
        "operationId": "DevBox_GetRemoteConnection",
        "responses": {
          "200": {
            "description": "The request completed successfully.",
            "schema": {
              "$ref": "#/definitions/RemoteConnection"
            }
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "devcenter.json#/definitions/CloudError"
            },
            "headers": {
              "x-ms-error-code": {
                "description": "The error code for specific error that occurred.",
                "type": "string"
              }
            }
          }
        },
        "x-ms-examples": {
          "DevBox_GetRemoteConnection": {
            "$ref": "./examples/DevBox_GetRemoteConnection.json"
          }
        }
      }
    }
  },
  "definitions": {
    "PoolListResult": {
      "type": "object",
      "description": "The Pool list result",
      "properties": {
        "value": {
          "description": "Current page of results",
          "type": "array",
          "items": {
            "$ref": "#/definitions/Pool"
          },
          "readOnly": true
        },
        "nextLink": {
          "type": "string",
          "description": "The URL to get the next set of results.",
          "readOnly": true
        }
      }
    },
    "Pool": {
      "type": "object",
      "description": "A pool of Dev Boxes.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Pool name",
          "readOnly": true
        },
        "location": {
          "description": "Azure region where Dev Boxes in the pool are located",
          "type": "string",
          "readOnly": true
        },
        "osType": {
          "description": "The operating system type of Dev Boxes in this pool",
          "$ref": "#/definitions/OsType",
          "readOnly": true
        },
        "hardwareProfile": {
          "description": "Hardware settings for the Dev Boxes created in this pool",
          "$ref": "#/definitions/HardwareProfile",
          "readOnly": true
        },
        "storageProfile": {
          "description": "Storage settings for Dev Box created in this pool",
          "$ref": "#/definitions/StorageProfile",
          "readOnly": true
        },
        "imageReference": {
          "description": "Image settings for Dev Boxes create in this pool",
          "$ref": "#/definitions/ImageReference",
          "readOnly": true
        }
      }
    },
    "DevBoxListResult": {
      "type": "object",
      "description": "The Dev Box list result",
      "properties": {
        "value": {
          "description": "The list of DevBox Dev Boxes",
          "type": "array",
          "items": {
            "$ref": "#/definitions/DevBox"
          },
          "readOnly": true
        },
        "nextLink": {
          "type": "string",
          "description": "The URL to get the next set of results.",
          "readOnly": true
        }
      }
    },
    "DevBox": {
      "type": "object",
      "description": "A DevBox Dev Box",
      "properties": {
        "name": {
          "description": "Display name for the Dev Box",
          "type": "string",
          "readOnly": true
        },
        "projectName": {
          "description": "Name of the project this Dev Box belongs to",
          "type": "string",
          "readOnly": true
        },
        "poolName": {
          "description": "The name of the Dev Box pool this machine belongs to.",
          "type": "string",
          "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{2,62}$",
          "minLength": 3,
          "maxLength": 63,
          "x-ms-mutability": [
            "read",
            "create"
          ]
        },
        "provisioningState": {
          "description": "The current provisioning state of the Dev Box.",
          "type": "string",
          "readOnly": true
        },
        "actionState": {
          "description": "The current action state of the Dev Box. This is state is based on previous action performed by user.",
          "type": "string",
          "readOnly": true
        },
        "powerState": {
          "description": "The current power state of the Dev Box.",
          "$ref": "#/definitions/PowerState",
          "readOnly": true
        },
        "errorDetails": {
          "description": "Provisioning or action error details. Populated only for error states.",
          "readOnly": true,
          "$ref": "devcenter.json#/definitions/ProvisioningError"
        },
        "location": {
          "description": "Azure region where this Dev Box is located. This will be the same region as the Virtual Network it is attached to.",
          "type": "string",
          "readOnly": true
        },
        "osType": {
          "description": "The operating system type of this Dev Box.",
          "$ref": "#/definitions/OsType",
          "readOnly": true
        },
        "owner": {
          "type": "string",
          "description": "User identifier of the user this vm is assigned to.",
          "readOnly": true
        },
        "hardwareProfile": {
          "description": "Information about the Dev Box's hardware resources",
          "$ref": "#/definitions/HardwareProfile",
          "readOnly": true
        },
        "storageProfile": {
          "description": "Storage settings for this Dev Box",
          "$ref": "#/definitions/StorageProfile",
          "readOnly": true
        },
        "imageReference": {
          "description": "Information about the image used for this Dev Box",
          "$ref": "#/definitions/ImageReference",
          "readOnly": true
        },
        "createdTime": {
          "description": "Creation time of this Dev Box",
          "type": "string",
          "readOnly": true,
          "format": "date-time"
        }
      },
      "required": [
        "poolName"
      ]
    },
    "OsType": {
      "type": "string",
      "enum": [
        "Windows"
      ],
      "description": "The operating system type.",
      "x-ms-enum": {
        "name": "OsType",
        "modelAsString": true
      }
    },
    "HardwareProfile": {
      "description": "Hardware specifications for the Dev Box.",
      "type": "object",
      "properties": {
        "skuName": {
          "description": "The name of the SKU",
          "type": "string",
          "readOnly": true
        },
        "vCPUs": {
          "description": "The number of vCPUs available for the Dev Box.",
          "type": "integer",
          "format": "int32",
          "readOnly": true
        },
        "memoryGB": {
          "description": "The amount of memory available for the Dev Box.",
          "type": "integer",
          "format": "int32",
          "readOnly": true
        }
      }
    },
    "StorageProfile": {
      "type": "object",
      "description": "Storage settings for the Dev Box's disks",
      "properties": {
        "osDisk": {
          "$ref": "#/definitions/OSDisk"
        }
      }
    },
    "OSDisk": {
      "type": "object",
      "description": "Settings for the operating system disk.",
      "properties": {
        "diskSizeGB": {
          "description": "The size of the OS Disk in gigabytes.",
          "type": "integer",
          "format": "int32",
          "readOnly": true
        }
      }
    },
    "ImageReference": {
      "description": "Specifies information about the image used",
      "type": "object",
      "properties": {
        "name": {
          "description": "The name of the image used.",
          "type": "string",
          "readOnly": true
        },
        "version": {
          "description": "The version of the image.",
          "type": "string",
          "readOnly": true
        },
        "publishedDate": {
          "description": "The datetime that the backing image version was published.",
          "type": "string",
          "readOnly": true,
          "format": "date-time"
        }
      }
    },
    "RemoteConnection": {
      "description": "Provides RDP connection information",
      "type": "object",
      "properties": {
        "webUrl": {
          "description": "URL to open a browser based RDP session",
          "type": "string",
          "readOnly": true
        },
        "rdpConnectionUrl": {
          "description": "Link to open a Remote Desktop session",
          "type": "string",
          "readOnly": true
        }
      }
    },
    "PowerState": {
      "type": "string",
      "enum": [
        "Unknown",
        "Deallocated",
        "PoweredOff",
        "Running",
        "Hibernated"
      ],
      "description": "The power states of a Dev Box.",
      "x-ms-enum": {
        "name": "PowerState",
        "modelAsString": true
      }
    }
  },
  "parameters": {
    "PoolNameParameter": {
      "name": "poolName",
      "description": "The name of a pool of Dev Boxes.",
      "required": true,
      "type": "string",
      "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{2,62}$",
      "minLength": 3,
      "maxLength": 63,
      "in": "path",
      "x-ms-parameter-location": "method"
    },
    "DevBoxNameParameterName": {
      "name": "devBoxName",
      "in": "path",
      "required": true,
      "type": "string",
      "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]{2,62}$",
      "minLength": 3,
      "maxLength": 63,
      "description": "The name of a Dev Box.",
      "x-ms-parameter-location": "method"
    },
    "UserIdParameterName": {
      "name": "userId",
      "in": "path",
      "required": true,
      "x-ms-client-default": "me",
      "type": "string",
      "pattern": "^[a-zA-Z0-9]{8}-([a-zA-Z0-9]{4}-){3}[a-zA-Z0-9]{12}$|^me$",
      "minLength": 2,
      "maxLength": 36,
      "description": "The id of the user. If value is 'me', the identity is taken from the authentication context",
      "x-ms-parameter-location": "method"
    }
  }
}
