import "@azure-tools/cadl-azure-core";
import "@cadl-lang/rest";
import "./models.cadl";

using Cadl.Rest;
using Cadl.Http;
using Azure.Core;

namespace Azure.OpenAI;

@doc("Input model for completions create endpoint")
model CompletionsOperationInput {
  @doc("deployment id of the model which was deployed")
  @path "deploymentId": string;
  @doc("expected schema for the body of the completion post request")
  @body
  body: CompletionCreateBody;
}

interface CompletionsOperations {
  #suppress "@azure-tools/cadl-azure-core/use-standard-operations" "This is an existing service, we have a non-conforming operation."
  @summary("Create a completion from a chosen model")
  @doc("Create a completion from a chosen model")
  @route("/deployments/{deploymentId}/completions")
  @post
  Create is Foundations.Operation<
    CompletionsOperationInput,
    CreateCompletionResponse
  >;
}

@doc("Input model for embeddings create endpoint")
model EmbeddingsOperationInput {
  @doc("deployment id of the model which was deployed")
  @path
  "deploymentId": string;
  @doc("expected schema for the body of the embedding post request")
  @body
  body: EmbeddingsCreateBody;
}

interface EmbeddingsOperations {
  #suppress "@azure-tools/cadl-azure-core/use-standard-operations" "This is an existing service, we have a non-conforming operation."
  @summary("Return the embeddings for a given prompt.")
  @doc("Return the embeddings for a given prompt.")
  @route("/deployments/{deploymentId}/embeddings")
  @post
  Create is Foundations.Operation<
    EmbeddingsOperationInput,
    void
  >;
}
