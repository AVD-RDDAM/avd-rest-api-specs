{
  "swagger": "2.0",
  "info": {
    "version": "2023-02-09-preview",
    "title": "McppClient",
    "description": "MCPP is the newest program set to track partners, measure their success, and qualify and reward them as Solution Partners across seven different designation groups.  The McppClient provides an interface to create an manage MCPP related purchases programatically"
  },
  "host": "management.azure.com",
  "schemes": ["https"],
  "consumes": ["application/json"],
  "produces": ["application/json"],
  "security": [
    {
      "azure_auth": ["user_impersonation"]
    }
  ],
  "securityDefinitions": {
    "azure_auth": {
      "type": "oauth2",
      "authorizationUrl": "https://login.microsoftonline.com/common/oauth2/authorize",
      "flow": "implicit",
      "description": "Azure Active Directory OAuth2 Flow",
      "scopes": {
        "user_impersonation": "impersonate your user account"
      }
    }
  },
  "paths": {
    "/providers/Microsoft.CloudPartnerProgram/operations": {
      "get": {
          "tags": [
              "Operations"
          ],
          "description": "Lists all of the available RP operations.",
          "operationId": "Operations_List",
          "x-ms-examples": {
            "getOperations": {
              "$ref": "./examples/getOperations.json"
            }
          },
          "parameters": [{
              "$ref": "#/parameters/ApiVersionParameter"
          }],
          "responses": {
              "200": {
                  "description": "OK. The request has succeeded.",
                  "schema": {
                      "$ref": "#/definitions/OperationListResult"
                  }
              },
              "default": {
                  "description": "Resource Provider error response describing why the operation failed.",
                  "schema": {
                      "$ref": "#/definitions/ErrorResponse"
                  }
              }
          },
          "x-ms-pageable": {
              "nextLinkName": "nextLink"
          }
      }
    },
    "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.CloudPartnerProgram/membership": {
      "get": {
        "tags": ["CloudPartnerProgramMembership"],
        "operationId": "membershipByResourceGroup_List",
        "x-ms-examples": {
          "getOperations": { "$ref": "./examples/getMcppPurchaseDetailsList.json" }
        },
        "description": "Fetch list of CloudPartnerProgramMembership purchase details for a resource group under a given subscription",
        "parameters": [
          {
            "$ref": "#/parameters/SubscriptionIdParameter"
          },
          {
            "$ref": "#/parameters/ResourceGroupNameParameter"
          },
          {
            "$ref": "#/parameters/ApiVersionParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "OK. The request has succeeded.",
            "schema": {
              "$ref": "#/definitions/CloudPartnerProgramMembershipPurchaseDetailsListResponse"
            }
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/subscriptions/{subscriptionId}/providers/Microsoft.CloudPartnerProgram/membership": {
      "get": {
        "tags": ["CloudPartnerProgramMembership"],
        "operationId": "membershipBySubscription_List",
        "x-ms-examples": {
          "getOperations": { "$ref": "./examples/getMcppPurchaseDetailsForSubscription.json" }
        },
        "description": "Fetch list of CloudPartnerProgramMembership purchase details for a given subscription",
        "parameters": [
          {
            "$ref": "#/parameters/SubscriptionIdParameter"
          },
          {
            "$ref": "#/parameters/ApiVersionParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "OK. The request has succeeded.",
            "schema": {
              "$ref": "#/definitions/MembershipDetailsListResponse"
            }
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.CloudPartnerProgram/membership/{resourceName}": {
      "get": {
        "tags": ["CloudPartnerProgramMembership"],
        "operationId": "membership_GetPurchaseDetails",
        "x-ms-examples": {
          "getOperations": { "$ref": "./examples/getMcppPurchaseDetails.json" }
        },
        "description": "The operation to fetch purchase details of a CloudPartnerProgramMembership offer",
        "parameters": [
          {
            "$ref": "#/parameters/SubscriptionIdParameter"
          },
          {
            "$ref": "#/parameters/ResourceGroupNameParameter"
          },
          {
            "$ref": "#/parameters/ResourceNameParameter"
          },
          {
            "$ref": "#/parameters/ApiVersionParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "Purchase details of the CloudPartnerProgramMembership resource.",
            "schema": {
              "$ref": "#/definitions/MembershipDetailsResponse"
            }
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      },
      "put": {
        "tags": ["CloudPartnerProgramMembership"],
        "operationId": "membership_CreatePurchase",
        "x-ms-examples": {
          "putOperations": { "$ref": "./examples/createMcppPurchase.json" }
        },
        "description": "Create a CloudPartnerProgramMembership purchase",
        "parameters": [
          {
            "$ref": "#/parameters/SubscriptionIdParameter"
          },
          {
            "$ref": "#/parameters/ResourceGroupNameParameter"
          },
          {
            "$ref": "#/parameters/ResourceNameParameter"
          },
          {
            "$ref": "#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "#/parameters/ProductCodeParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "List the CloudPartnerProgramMembership purchase details .",
            "schema": {
              "$ref": "#/definitions/McppPurchaseDetailsResponse"
            }
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      },
      "delete": {
        "tags": ["CloudPartnerProgramMembership"],
        "operationId": "membership_CancelMcppPuchase",
        "x-ms-examples": {
          "deleteOperations": { "$ref": "./examples/cancelMcppPurchase.json" }
        },
        "description": "The operation to cancel a CloudPartnerProgramMembership offer",
        "parameters": [
          {
            "$ref": "#/parameters/SubscriptionIdParameter"
          },
          {
            "$ref": "#/parameters/ResourceGroupNameParameter"
          },
          {
            "$ref": "#/parameters/ResourceNameParameter"
          },
          {
            "$ref": "#/parameters/ApiVersionParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "Canceled the purchase"
          },
          "204": {
            "description": "purchase record does not exist"
          },
          "default": {
            "description": "Error response describing why the operation failed.",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "MembershipDetailsResponse":{
      "description": "MCPP Purchase details response",
      "type": "object",
      "x-ms-azure-resource": true,
      "properties": {
        "id": {
          "type": "string",
          "description": "id for the purchase resource",
          "readOnly": true
        },
        "name": {
          "description": "purchase resource name.",
          "readOnly": true,
          "type": "string"
        },
        "type": {
          "description": "Resource type, CloudPartnerProgramMembership.",
          "readOnly": true,
          "type": "string"
        },
        "properties": { 
          "$ref": "#/definitions/McppPurchaseDetailsResponseProperties",
          "description": "MCPP Purchase details response properties."
        }
      }
    },
    "MembershipDetailsResponseProperties": {
      "description": "MCPP Purchase details response properties",
      "type": "object",
      "properties": {
        "orderId": {
          "type": "string",
          "description": "order number for the purchase",
          "readOnly": true
        },
        "orderDateTime": {
          "type": "string",
          "description": "date time at which the order was placed",
          "readOnly": true
        },
        "status": {
          "type": "string",
          "description": "purchase status or the order",
          "readOnly": true
        },
        "operationDetails":{
          "type": "object",
          "description": "operation details related to the purchase",
          "readOnly": true
        }
      }
    },
    "CloudPartnerProgramMembershipPurchaseDetailsListResponse": {
      "description": "Get purchase details of a resource",
      "type":"object",
      "properties": {
        "value": {
          "description": "The list of McppPurchaseDetailsResponse.",
          "type": "array",
          "readOnly": true,
          "items": {
            "$ref": "#/definitions/McppPurchaseDetailsResponse"
          }
        }
      }
    },
    "OperationListResult": {
      "description": "Result of the request to list operations. It contains a list of operations and a URL link to get the next set of results.",
      "type": "object",
      "properties": {
        "value": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Operation"
          },
          "x-ms-identifiers":[],
          "description": "List of operations."
        },
        "nextLink": {
          "type": "string",
          "description": "URL to get the next set of operation list results if there are any."
        }
      }
    },
    "Operation": {
      "description": "REST API operation",
      "type": "object",
      "properties": {
        "name": {
          "description": "Operation name: {provider}/{resource}/{operation}",
          "type": "string"
        },
        "isDataAction": {
          "description": "Indicates whether the operation is a data action",
          "type": "boolean"
        },
        "display": {
          "description": "The object that represents the operation.",
          "type": "object",
          "properties": {
            "provider": {
              "description": "Service provider: Microsoft.Subscription",
              "type": "string"
            },
            "resource": {
              "description": "Resource on which the operation is performed: Profile, endpoint, etc.",
              "type": "string"
            },
            "operation": {
              "description": "Operation type: Read, write, delete, etc.",
              "type": "string"
            },
            "description": {
              "description": "Friendly description for the operation",
              "type": "string"
            }
          }
        }
      }
    },
    "ErrorResponse": {
      "description": "Error response indicates that the service is not able to process the incoming request. The reason is provided in the error message.",
      "type":"object",
      "properties": {
        "error": {
          "$ref": "#/definitions/ErrorDefinition",
          "description": "The error details on why the resource could not be fetched"
        }
      }
    },
    "ErrorDefinition": {
      "description": "Error definition.",
      "type":"object",
      "properties": {
        "code": {
          "description": "Error code",
          "type": "string"
        },
        "message": {
          "description": "Description of the error.",
          "type": "string"
        }
      }
    },
    "productCode": {
      "type": "object",
      "description": "Unique identifier of the product",
      "properties": {
        "productCode": {
          "type": "string",
          "description": "Unique identifier of the product"
        }
      }
    }
  },
  "parameters": {
    "SubscriptionIdParameter": {
      "name": "subscriptionId",
      "in": "path",
      "required": true,
      "type": "string",
      "description": "The Azure subscription ID. This is a GUID-formatted string (e.g. 00000000-0000-0000-0000-000000000000)",
      "x-ms-parameter-location": "method"
    },
    "ResourceGroupNameParameter": {
      "name": "resourceGroupName",
      "in": "path",
      "required": true,
      "type": "string",
      "description": "The name of the resource group.",
      "x-ms-parameter-location": "method"
    },
    "ApiVersionParameter": {
      "name": "api-version",
      "in": "query",
      "required": true,
      "type": "string",
      "description": "The API version to be used with the HTTP request.",
      "x-ms-parameter-location":"method"
    },
    "ResourceNameParameter": {
      "name": "resourceName",
      "in": "path",
      "required": true,
      "type": "string",
      "description": "The name of the resource.",
      "pattern": "^[a-z][a-z0-9]*$",
      "minLength": 3,
      "maxLength": 63,
      "x-ms-parameter-location": "method"
    },
    "ProductCodeParameter": {
      "name": "body",
      "x-ms-parameter-location": "method",
      "in": "body",
      "required": true,
      "schema": { 
        "$ref":"#/definitions/productCode"
      },
      "description": "The product upn that needs to be purchased"
    }
  }
}