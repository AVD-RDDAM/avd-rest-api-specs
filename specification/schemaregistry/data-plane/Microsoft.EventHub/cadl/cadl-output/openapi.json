{
  "swagger": "2.0",
  "info": {
    "title": "Azure Schema Registry",
    "version": "2021-10",
    "description": "Azure Schema Registry is as a central schema repository, with support for versioning, management, compatibility checking, and RBAC.",
    "x-cadl-generated": [
      {
        "emitter": "@azure-tools/cadl-autorest"
      }
    ]
  },
  "schemes": [
    "https"
  ],
  "x-ms-parameterized-host": {
    "hostTemplate": "{endpoint}",
    "useSchemePrefix": false,
    "parameters": [
      {
        "name": "endpoint",
        "in": "path",
        "required": true,
        "description": "The Schema Registry service endpoint, for example my-namespace.servicebus.windows.net.",
        "type": "string",
        "x-ms-parameter-location": "client",
        "x-ms-skip-url-encoding": true
      }
    ]
  },
  "produces": [
    "application/json"
  ],
  "consumes": [
    "application/json"
  ],
  "tags": [],
  "paths": {
    "/$schemaGroups": {
      "get": {
        "operationId": "SchemaGroups_List",
        "summary": "Get list of schema groups.",
        "description": "Gets the list of schema groups user is authorized to access.",
        "parameters": [
          {
            "$ref": "#/parameters/ApiVersionParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "The request has succeeded.",
            "schema": {
              "$ref": "#/definitions/SchemaGroups"
            }
          },
          "default": {
            "description": "An error response returned from Azure Schema Registry service.",
            "headers": {
              "x-ms-error-code": {
                "description": "Error code for specific error that occurred.",
                "type": "string"
              }
            },
            "schema": {
              "$ref": "#/definitions/Error"
            }
          }
        },
        "x-ms-examples": {
          "Get schema groups": {
            "$ref": "./stable/2021-10/examples/OperationSchema_GetSchemaGroups.json"
          }
        }
      }
    },
    "/$schemaGroups/{groupName}/schemas/{schemaName}:get-id": {
      "get": {
        "operationId": "Schema_QueryIdByContent",
        "summary": "Get ID for existing schema.",
        "description": "Gets the ID referencing an existing schema within the specified schema group, as matched by schema content comparison.",
        "parameters": [
          {
            "$ref": "#/parameters/SchemaGroup"
          },
          {
            "$ref": "#/parameters/SchemaName"
          },
          {
            "$ref": "#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "#/parameters/SchemaContent.schemaContent"
          }
        ],
        "responses": {
          "204": {
            "description": "No Content",
            "headers": {
              "location": {
                "description": "URL location of schema, identified by schema group, schema name, and version.",
                "type": "string"
              },
              "schema-id": {
                "description": "References specific schema in registry namespace.",
                "type": "string"
              },
              "schema-id-location": {
                "description": "URL location of schema, identified by schema ID.",
                "type": "string"
              },
              "schema-group-name": {
                "description": "References schema group.",
                "type": "string"
              },
              "schema-name": {
                "description": "References schema name.",
                "type": "string"
              },
              "schema-version": {
                "description": "Version of the returned schema.",
                "type": "integer",
                "format": "int32"
              }
            }
          },
          "415": {
            "description": "Client Error",
            "headers": {
              "x-ms-error-code": {
                "description": "Error code for specific error that occurred.",
                "type": "string"
              }
            },
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "default": {
            "description": "An error response returned from Azure Schema Registry service.",
            "headers": {
              "x-ms-error-code": {
                "description": "Error code for specific error that occurred.",
                "type": "string"
              }
            },
            "schema": {
              "$ref": "#/definitions/Error"
            }
          }
        },
        "consumes": [
          "application/json; serialization=Avro"
        ],
        "x-ms-examples": {
          "Get schema Id": {
            "$ref": "./stable/2021-10/examples/OperationSchema_QueryIdByContent.json"
          }
        }
      }
    },
    "/$schemaGroups/{groupName}/schemas/{schemaName}": {
      "put": {
        "operationId": "Schema_Register",
        "summary": "Register new schema",
        "description": "Register new schema. If schema of specified name does not exist in specified group, schema is created at version 1. If schema of specified name exists already in specified group, schema is created at latest version + 1.\n",
        "parameters": [
          {
            "$ref": "#/parameters/SchemaGroup"
          },
          {
            "$ref": "#/parameters/SchemaName"
          },
          {
            "$ref": "#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "#/parameters/SchemaContent.schemaContent"
          }
        ],
        "responses": {
          "204": {
            "description": "No Content",
            "headers": {
              "location": {
                "description": "URL location of schema, identified by schema group, schema name, and version.",
                "type": "string"
              },
              "schema-id": {
                "description": "References specific schema in registry namespace.",
                "type": "string"
              },
              "schema-id-location": {
                "description": "URL location of schema, identified by schema ID.",
                "type": "string"
              },
              "schema-group-name": {
                "description": "References schema group.",
                "type": "string"
              },
              "schema-name": {
                "description": "References schema name.",
                "type": "string"
              },
              "schema-version": {
                "description": "Version of the returned schema.",
                "type": "integer",
                "format": "int32"
              }
            }
          },
          "415": {
            "description": "Client Error",
            "headers": {
              "x-ms-error-response": {
                "type": "boolean",
                "enum": [
                  true
                ]
              },
              "x-ms-error-code": {
                "description": "Error code for specific error that occurred.",
                "type": "string"
              }
            },
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "default": {
            "description": "An error response returned from Azure Schema Registry service.",
            "headers": {
              "x-ms-error-code": {
                "description": "Error code for specific error that occurred.",
                "type": "string"
              }
            },
            "schema": {
              "$ref": "#/definitions/Error"
            }
          }
        },
        "consumes": [
          "application/json; serialization=Avro"
        ],
        "x-ms-examples": {
          "Register schema": {
            "$ref": "./stable/2021-10/examples/OperationSchema_Register.json"
          }
        }
      }
    },
    "/$schemaGroups/{groupName}/schemas/{schemaName}/versions": {
      "get": {
        "operationId": "Schema_GetVersions",
        "summary": "Get list schema versions.",
        "description": "Gets the list of all versions of one schema.",
        "parameters": [
          {
            "$ref": "#/parameters/SchemaGroup"
          },
          {
            "$ref": "#/parameters/SchemaName"
          },
          {
            "$ref": "#/parameters/ApiVersionParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "The request has succeeded.",
            "schema": {
              "$ref": "#/definitions/SchemaVersions"
            }
          },
          "default": {
            "description": "An error response returned from Azure Schema Registry service.",
            "headers": {
              "x-ms-error-code": {
                "description": "Error code for specific error that occurred.",
                "type": "string"
              }
            },
            "schema": {
              "$ref": "#/definitions/Error"
            }
          }
        },
        "x-ms-examples": {
          "Get schema versions": {
            "$ref": "./stable/2021-10/examples/OperationSchema_GetSchemaVersions.json"
          }
        }
      }
    },
    "/$schemaGroups/$schemas/{id}": {
      "get": {
        "operationId": "Schema_GetById",
        "summary": "Get a registered schema by its unique ID reference.",
        "description": "Gets a registered schema by its unique ID.  Azure Schema Registry guarantees that ID is unique within a namespace. Operation response type is based on serialization of schema requested.",
        "parameters": [
          {
            "$ref": "#/parameters/SchemaId.id"
          },
          {
            "$ref": "#/parameters/ApiVersionParameter"
          }
        ],
        "responses": {
          "200": {
            "description": "Ok",
            "headers": {
              "location": {
                "description": "URL location of schema, identified by schema group, schema name, and version.",
                "type": "string"
              },
              "schema-id": {
                "description": "References specific schema in registry namespace.",
                "type": "string"
              },
              "schema-id-location": {
                "description": "URL location of schema, identified by schema ID.",
                "type": "string"
              },
              "schema-group-name": {
                "description": "References schema group.",
                "type": "string"
              },
              "schema-name": {
                "description": "References schema name.",
                "type": "string"
              },
              "schema-version": {
                "description": "Version of the returned schema.",
                "type": "integer",
                "format": "int32"
              }
            },
            "schema": {
              "type": "file"
            }
          },
          "default": {
            "description": "An error response returned from Azure Schema Registry service.",
            "headers": {
              "x-ms-error-code": {
                "description": "Error code for specific error that occurred.",
                "type": "string"
              }
            },
            "schema": {
              "$ref": "#/definitions/Error"
            }
          }
        },
        "produces": [
          "application/json; serialization=Avro",
          "application/json"
        ],
        "x-ms-examples": {
          "Get schema by ID": {
            "$ref": "./stable/2021-10/examples/OperationSchema_GetById.json"
          }
        }
      }
    }
  },
  "definitions": {
    "Error": {
      "type": "object",
      "properties": {
        "error": {
          "$ref": "#/definitions/ErrorDetail"
        }
      },
      "description": "An error response returned from Azure Schema Registry service.",
      "required": [
        "error"
      ]
    },
    "ErrorDetail": {
      "type": "object",
      "properties": {
        "code": {
          "type": "string",
          "description": "Type of error."
        },
        "message": {
          "type": "string",
          "description": "Brief description of error."
        },
        "details": {
          "$ref": "#/definitions/ErrorDetail",
          "description": "Error message details to help user understand/debug failure."
        }
      },
      "description": "Error response returned from Azure Schema Registry service.",
      "required": [
        "code",
        "message"
      ]
    },
    "SchemaGroup": {
      "type": "object",
      "properties": {},
      "description": "Name of individual schema group in list of schema groups."
    },
    "SchemaGroups": {
      "type": "object",
      "properties": {
        "schemaGroups": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/SchemaGroup"
          },
          "x-ms-identifiers": [],
          "x-cadl-name": "SchemaGroup[]",
          "description": "Array of schema groups."
        }
      },
      "description": "Array received from the registry containing the list of schema groups."
    },
    "SchemaVersion": {
      "type": "object",
      "properties": {
        "schemaVersion": {
          "type": "integer",
          "format": "int32"
        }
      },
      "description": "Version number of specific schema.",
      "required": [
        "schemaVersion"
      ]
    },
    "SchemaVersions": {
      "type": "object",
      "properties": {
        "schemaVersions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/SchemaVersion"
          },
          "x-ms-identifiers": [],
          "x-cadl-name": "SchemaVersion[]",
          "description": "Array of schema groups."
        }
      },
      "description": "Array received from the registry containing the list of versions for specific schema."
    }
  },
  "parameters": {
    "ApiVersionParameter": {
      "name": "api-version",
      "in": "query",
      "required": true,
      "description": "Schema Registry service API version that should be used.",
      "type": "string",
      "x-ms-parameter-location": "method"
    },
    "SchemaContent.schemaContent": {
      "name": "schemaContent",
      "in": "body",
      "required": true,
      "schema": {
        "type": "string",
        "format": "binary"
      },
      "x-ms-parameter-location": "method"
    },
    "SchemaGroup": {
      "name": "groupName",
      "in": "path",
      "required": true,
      "type": "string",
      "x-ms-parameter-location": "method"
    },
    "SchemaId.id": {
      "name": "id",
      "in": "path",
      "required": true,
      "type": "string",
      "x-ms-parameter-location": "method"
    },
    "SchemaName": {
      "name": "schemaName",
      "in": "path",
      "required": true,
      "description": "Name of schema.",
      "pattern": "^[A-Za-z0-9][^\\\\/$:]*$",
      "maxLength": 50,
      "type": "string",
      "x-ms-parameter-location": "method"
    }
  }
}
